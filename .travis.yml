sudo: false
addons:
  apt:
    packages:
    - automake
    - colorgcc
    - debootstrap
    - libtool
    - lsb-release
language: c
script:
  - ./autogen.sh
  - ./configure CC=$TRAVIS_CC
  - make
  - make test
env:
  global:
    - TEST_DEBOOTSTRAP=1
    - TEST_DEBOOTSTRAP_CACHE=cache
  matrix:
    - TRAVIS_CC=colorgcc EXTRA_CFLAGS='-Werror'
    - TRAVIS_CC=colorgcc EXTRA_CFLAGS='-std=c11 -Werror'
    - TRAVIS_CC=clang EXTRA_CFLAGS='-Werror'
    - TRAVIS_CC=clang EXTRA_CFLAGS='-std=c11 -Werror'
cache:
  directories:
    - test/cache
